{% extends "_base_edit.html" %}


{% block top %}
    <div class="title">
        <h2>{{ lecture.dossier_legislatif }}</h2>
        <h3>{{ lecture }}</h3>
    </div>
{% endblock %}

{% block secondary_header %}
    <nav class="nav secondary justify-content-between">
        <span class="nav-item">
            <a class="arrow-left" href="{{ request.resource_url(context) }}">Retourner à l’article</a>
        </span>
        <div>
            <h2>Journal des modifications</h2>
            <div>{{ article }}</div>
        </div>
        <span class="nav-item">
        </span>
    </nav>
{% endblock %}

{% block body %}
    <div class="container">
        <ul>
            {% for event in article.events %}
                <li>
                    <abbr title="{{ event.user.email }}">{{ event.user.display_name }}</abbr>
                    {{ event.action }}
                    {{ event.data["old_value"]|render_diff(event.data["new_value"]) }}
                    <em>
                        <time xsi:type="xsd:dateTime"
                            datetime="{{ event.created_at.isoformat() }}"
                            data-timestamp="{{ event.created_at_timestamp }}">
                                {{ event.created_at.strftime("%A %d %B à %I:%M%p") }}
                        </time>
                    </em>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
